<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hyperliquid SDK Demo</title>
    <style>
        :root {
            /* Color palette - Bloomberg-inspired white theme */
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #f0f1f2;
            --bg-panel: #fafbfc;
            --border-light: #e8e9eb;
            --border-medium: #d1d3d6;
            --text-primary: #1a1d21;
            --text-secondary: #5c6370;
            --text-tertiary: #8b919a;
            --accent-primary: #0066cc;
            --accent-secondary: #004d99;
            --success: #00875a;
            --success-bg: #e3fcef;
            --warning: #ff8b00;
            --warning-bg: #fffae6;
            --error: #de350b;
            --error-bg: #ffebe6;

            /* JSON Syntax Highlighting */
            --json-key: #0550ae;
            --json-string: #0a3069;
            --json-number: #0550ae;
            --json-boolean: #cf222e;
            --json-null: #6e7781;
            --json-bracket: #1a1d21;
            --json-punctuation: #5c6370;

            /* Typography */
            --font-mono: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Mono', 'Droid Sans Mono', 'Consolas', monospace;
            --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;

            /* Spacing scale */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 12px;
            --space-lg: 16px;
            --space-xl: 24px;
            --space-2xl: 32px;
            --space-3xl: 48px;

            /* Font sizes */
            --text-xs: 10px;
            --text-sm: 11px;
            --text-base: 12px;
            --text-md: 13px;
            --text-lg: 14px;
            --text-xl: 16px;
            --text-2xl: 20px;
            --text-3xl: 24px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: var(--font-mono);
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.5;
            min-height: 100vh;
        }

        /* Top Navigation Bar */
        .top-bar {
            background-color: var(--bg-primary);
            border-bottom: 1px solid var(--border-light);
            padding: var(--space-md) var(--space-xl);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .logo {
            font-size: var(--text-xl);
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: -0.5px;
        }

        .logo-tag {
            font-size: var(--text-xs);
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 2px 6px;
            background-color: var(--bg-tertiary);
            border-radius: 3px;
        }

        .status-section {
            display: flex;
            align-items: center;
            gap: var(--space-xl);
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        .status-dot.connected {
            background-color: var(--success);
            box-shadow: 0 0 4px var(--success);
        }

        .status-dot.disconnected {
            background-color: var(--error);
        }

        .network-badge {
            font-size: var(--text-xs);
            padding: 2px 8px;
            background-color: var(--accent-primary);
            color: white;
            border-radius: 3px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 600;
        }

        /* Main Layout */
        .app-container {
            display: flex;
            height: calc(100vh - 49px);
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background-color: var(--bg-primary);
            border-right: 1px solid var(--border-light);
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
            overflow-y: auto;
        }

        .nav-section {
            padding: var(--space-lg) 0;
            border-bottom: 1px solid var(--border-light);
        }

        .nav-section:last-child {
            border-bottom: none;
        }

        .nav-header {
            font-size: var(--text-xs);
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-tertiary);
            padding: 0 var(--space-lg) var(--space-sm);
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .nav-header-count {
            font-size: var(--text-xs);
            color: var(--text-tertiary);
            background-color: var(--bg-tertiary);
            padding: 1px 6px;
            border-radius: 10px;
        }

        .nav-list {
            list-style: none;
        }

        .nav-item {
            padding: var(--space-sm) var(--space-lg);
            font-size: var(--text-sm);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.1s ease;
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            border-left: 2px solid transparent;
        }

        .nav-item:hover {
            background-color: var(--bg-secondary);
            color: var(--text-primary);
        }

        .nav-item.active {
            background-color: var(--bg-tertiary);
            color: var(--accent-primary);
            border-left-color: var(--accent-primary);
            font-weight: 500;
        }

        .nav-item-tag {
            margin-left: auto;
            font-size: 9px;
            color: var(--text-tertiary);
            background-color: var(--bg-tertiary);
            padding: 1px 5px;
            border-radius: 3px;
            text-transform: uppercase;
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
            overflow: hidden;
        }

        /* Content Header */
        .content-header {
            background-color: var(--bg-primary);
            border-bottom: 1px solid var(--border-light);
            padding: var(--space-lg) var(--space-xl);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .content-title-section {
            flex: 1;
        }

        .content-title {
            font-size: var(--text-xl);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .endpoint-method {
            font-size: var(--text-xs);
            padding: 2px 6px;
            background-color: var(--success);
            color: white;
            border-radius: 3px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .content-description {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            max-width: 600px;
        }

        .content-path {
            font-size: var(--text-xs);
            color: var(--text-tertiary);
            margin-top: var(--space-xs);
            font-family: var(--font-mono);
        }

        .content-actions {
            display: flex;
            gap: var(--space-sm);
        }

        /* Buttons */
        .btn {
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            padding: var(--space-sm) var(--space-lg);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.1s ease;
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
            font-weight: 500;
            border: 1px solid transparent;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background-color: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .btn-primary:hover:not(:disabled) {
            background-color: var(--accent-secondary);
            border-color: var(--accent-secondary);
        }

        .btn-secondary {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            border-color: var(--border-medium);
        }

        .btn-secondary:hover:not(:disabled) {
            background-color: var(--bg-secondary);
        }

        .btn-icon {
            padding: var(--space-sm);
        }

        /* Content Body */
        .content-body {
            flex: 1;
            padding: var(--space-xl);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: var(--space-lg);
        }

        /* Panels */
        .panel {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-light);
            border-radius: 6px;
            overflow: hidden;
        }

        .panel-header {
            padding: var(--space-md) var(--space-lg);
            border-bottom: 1px solid var(--border-light);
            background-color: var(--bg-panel);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-title {
            font-size: var(--text-md);
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .panel-title-tag {
            font-size: var(--text-xs);
            font-weight: 400;
            color: var(--text-tertiary);
            padding: 2px 6px;
            background-color: var(--bg-tertiary);
            border-radius: 3px;
        }

        .panel-actions {
            display: flex;
            gap: var(--space-sm);
        }

        .panel-body {
            padding: var(--space-lg);
        }

        /* Input Forms */
        .form-group {
            margin-bottom: var(--space-lg);
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        .form-label {
            display: block;
            font-size: var(--text-sm);
            color: var(--text-secondary);
            margin-bottom: var(--space-sm);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-label .required {
            color: var(--error);
        }

        .form-input {
            width: 100%;
            padding: var(--space-sm) var(--space-md);
            font-family: var(--font-mono);
            font-size: var(--text-md);
            border: 1px solid var(--border-medium);
            border-radius: 4px;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: border-color 0.1s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 2px rgba(0, 102, 204, 0.1);
        }

        .form-input::placeholder {
            color: var(--text-tertiary);
        }

        .form-help {
            font-size: var(--text-xs);
            color: var(--text-tertiary);
            margin-top: var(--space-xs);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-lg);
        }

        .form-select {
            width: 100%;
            padding: var(--space-sm) var(--space-md);
            font-family: var(--font-mono);
            font-size: var(--text-md);
            border: 1px solid var(--border-medium);
            border-radius: 4px;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            cursor: pointer;
        }

        .form-select:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        /* Response Area */
        .response-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 300px;
        }

        .response-area {
            flex: 1;
            background-color: #1e1e1e;
            border-radius: 4px;
            padding: var(--space-lg);
            overflow: auto;
            font-size: var(--text-base);
            line-height: 1.6;
            color: #d4d4d4;
        }

        .response-area pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            margin: 0;
        }

        .response-area.loading {
            color: var(--text-tertiary);
            font-style: italic;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--bg-tertiary);
        }

        .response-area.error {
            background-color: var(--error-bg);
            color: var(--error);
        }

        /* JSON Syntax Highlighting (dark theme) */
        .json-key { color: #9cdcfe; }
        .json-string { color: #ce9178; }
        .json-number { color: #b5cea8; }
        .json-boolean { color: #569cd6; }
        .json-null { color: #569cd6; }
        .json-bracket { color: #d4d4d4; }
        .json-punctuation { color: #d4d4d4; }

        /* Loading Spinner */
        .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid var(--border-light);
            border-top-color: var(--accent-primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-right: var(--space-sm);
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-medium);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-tertiary);
        }

        /* Footer */
        .footer {
            padding: var(--space-md) var(--space-xl);
            border-top: 1px solid var(--border-light);
            background-color: var(--bg-primary);
            font-size: var(--text-xs);
            color: var(--text-tertiary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .footer-links {
            display: flex;
            gap: var(--space-lg);
        }

        .footer-link {
            color: var(--text-secondary);
            text-decoration: none;
        }

        .footer-link:hover {
            color: var(--accent-primary);
        }

        /* Keyboard shortcut hint */
        .shortcut-hint {
            font-size: var(--text-xs);
            color: var(--text-tertiary);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        kbd {
            font-family: var(--font-mono);
            font-size: var(--text-xs);
            padding: 2px 6px;
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border-medium);
            border-radius: 3px;
            color: var(--text-secondary);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .form-row {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 992px) {
            .sidebar {
                width: 220px;
            }

            .content-header {
                flex-direction: column;
                gap: var(--space-lg);
            }

            .content-actions {
                width: 100%;
            }
        }

        @media (max-width: 768px) {
            .top-bar {
                padding: var(--space-sm) var(--space-lg);
            }

            .status-section {
                gap: var(--space-md);
            }

            .status-item span:last-child {
                display: none;
            }

            .app-container {
                flex-direction: column;
                height: auto;
                min-height: calc(100vh - 49px);
            }

            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid var(--border-light);
                max-height: 250px;
                overflow-y: auto;
            }

            .nav-section {
                padding: var(--space-md) 0;
            }

            .nav-list {
                display: flex;
                flex-wrap: wrap;
                padding: 0 var(--space-md);
                gap: var(--space-xs);
            }

            .nav-item {
                padding: var(--space-xs) var(--space-md);
                border-radius: 20px;
                border-left: none;
                font-size: var(--text-xs);
            }

            .nav-item.active {
                border-left: none;
                background-color: var(--accent-primary);
                color: white;
            }

            .nav-item-tag {
                display: none;
            }

            .content-body {
                padding: var(--space-lg);
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .footer {
                flex-direction: column;
                gap: var(--space-md);
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            .logo-tag {
                display: none;
            }

            .network-badge {
                font-size: 9px;
                padding: 2px 6px;
            }

            .btn {
                padding: var(--space-sm) var(--space-md);
                font-size: var(--text-xs);
            }

            .panel-body {
                padding: var(--space-md);
            }

            .response-area {
                font-size: var(--text-sm);
                padding: var(--space-md);
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .text-mono {
            font-family: var(--font-mono);
        }

        /* Warning Banner for Exchange Endpoints */
        .warning-banner {
            background-color: var(--warning-bg);
            border: 1px solid var(--warning);
            border-radius: 4px;
            padding: var(--space-md) var(--space-lg);
            margin-bottom: var(--space-lg);
            display: flex;
            align-items: flex-start;
            gap: var(--space-md);
        }

        .warning-banner-icon {
            color: var(--warning);
            font-size: var(--text-xl);
            flex-shrink: 0;
            line-height: 1;
        }

        .warning-banner-content {
            flex: 1;
        }

        .warning-banner-title {
            font-size: var(--text-md);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
        }

        .warning-banner-text {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            line-height: 1.5;
        }

        /* Success/Error Response Indicators */
        .response-status {
            display: inline-flex;
            align-items: center;
            gap: var(--space-xs);
            font-size: var(--text-sm);
            padding: 2px 8px;
            border-radius: 3px;
            margin-left: var(--space-sm);
        }

        .response-status.success {
            background-color: var(--success-bg);
            color: var(--success);
        }

        .response-status.error {
            background-color: var(--error-bg);
            color: var(--error);
        }

        /* Execute Action button styling */
        .btn-warning {
            background-color: var(--warning);
            color: white;
            border-color: var(--warning);
        }

        .btn-warning:hover:not(:disabled) {
            background-color: #e67e00;
            border-color: #e67e00;
        }

        /* ============================================
           WebSocket Demo Styles
           ============================================ */

        /* WebSocket Status Indicator */
        .ws-status {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm) var(--space-md);
            background-color: var(--bg-secondary);
            border-radius: 4px;
            font-size: var(--text-sm);
        }

        .ws-status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .ws-status-dot.disconnected {
            background-color: var(--text-tertiary);
        }

        .ws-status-dot.connecting {
            background-color: var(--warning);
            animation: pulse 1s infinite;
        }

        .ws-status-dot.connected {
            background-color: var(--success);
            box-shadow: 0 0 6px var(--success);
        }

        .ws-status-dot.error {
            background-color: var(--error);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Subscription Controls */
        .ws-subscription-categories {
            display: flex;
            flex-direction: column;
            gap: var(--space-lg);
        }

        .ws-category {
            border: 1px solid var(--border-light);
            border-radius: 6px;
            overflow: hidden;
        }

        .ws-category-header {
            padding: var(--space-sm) var(--space-md);
            background-color: var(--bg-panel);
            border-bottom: 1px solid var(--border-light);
            font-size: var(--text-sm);
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .ws-category-count {
            font-size: var(--text-xs);
            font-weight: 400;
            color: var(--text-tertiary);
            background-color: var(--bg-tertiary);
            padding: 2px 6px;
            border-radius: 10px;
        }

        .ws-subscription-list {
            padding: var(--space-md);
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-sm);
        }

        .ws-subscription-item {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            padding: var(--space-xs) var(--space-sm);
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: 4px;
            font-size: var(--text-xs);
            cursor: pointer;
            transition: all 0.15s ease;
            user-select: none;
        }

        .ws-subscription-item:hover {
            border-color: var(--accent-primary);
            background-color: var(--bg-tertiary);
        }

        .ws-subscription-item.active {
            background-color: var(--accent-primary);
            border-color: var(--accent-primary);
            color: white;
        }

        .ws-subscription-item.active:hover {
            background-color: var(--accent-secondary);
        }

        .ws-subscription-item .sub-indicator {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: var(--text-tertiary);
            transition: all 0.15s ease;
        }

        .ws-subscription-item.active .sub-indicator {
            background-color: white;
            box-shadow: 0 0 4px rgba(255, 255, 255, 0.5);
        }

        /* Subscription Form */
        .ws-subscription-form {
            padding: var(--space-md);
            border-top: 1px solid var(--border-light);
            background-color: var(--bg-panel);
        }

        .ws-form-row {
            display: flex;
            gap: var(--space-sm);
            flex-wrap: wrap;
            align-items: flex-end;
        }

        .ws-form-group {
            flex: 1;
            min-width: 150px;
        }

        .ws-form-group label {
            display: block;
            font-size: var(--text-xs);
            color: var(--text-secondary);
            margin-bottom: var(--space-xs);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .ws-form-group input,
        .ws-form-group select {
            width: 100%;
            padding: var(--space-xs) var(--space-sm);
            font-family: var(--font-mono);
            font-size: var(--text-sm);
            border: 1px solid var(--border-medium);
            border-radius: 4px;
            background-color: var(--bg-primary);
        }

        .ws-form-group input:focus,
        .ws-form-group select:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        /* Message Feed */
        .ws-message-feed {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 400px;
            max-height: 600px;
        }

        .ws-feed-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-md);
            border-bottom: 1px solid var(--border-light);
            background-color: var(--bg-panel);
        }

        .ws-feed-title {
            font-size: var(--text-md);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .ws-feed-count {
            font-size: var(--text-xs);
            font-weight: 400;
            color: var(--text-tertiary);
            background-color: var(--bg-tertiary);
            padding: 2px 8px;
            border-radius: 10px;
        }

        .ws-feed-controls {
            display: flex;
            gap: var(--space-sm);
        }

        .ws-feed-messages {
            flex: 1;
            overflow-y: auto;
            background-color: #1e1e1e;
            padding: var(--space-sm);
        }

        .ws-message {
            padding: var(--space-sm) var(--space-md);
            margin-bottom: var(--space-xs);
            border-radius: 4px;
            font-size: var(--text-xs);
            line-height: 1.4;
            animation: fadeIn 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-4px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .ws-message.data {
            background-color: rgba(156, 220, 254, 0.1);
            border-left: 2px solid #9cdcfe;
        }

        .ws-message.subscribe {
            background-color: rgba(0, 135, 90, 0.1);
            border-left: 2px solid var(--success);
        }

        .ws-message.unsubscribe {
            background-color: rgba(255, 139, 0, 0.15);
            border-left: 2px solid var(--warning);
        }

        .ws-message.error {
            background-color: rgba(222, 53, 11, 0.1);
            border-left: 2px solid var(--error);
        }

        .ws-message.system {
            background-color: rgba(100, 100, 100, 0.1);
            border-left: 2px solid var(--text-tertiary);
        }

        .ws-message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-xs);
        }

        .ws-message-type {
            font-weight: 600;
            color: #d4d4d4;
        }

        .ws-message-time {
            font-size: 10px;
            color: #6a737d;
        }

        .ws-message-content {
            color: #d4d4d4;
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 200px;
            overflow-y: auto;
        }

        .ws-message-content.collapsed {
            max-height: 60px;
            overflow: hidden;
            position: relative;
        }

        .ws-message-content.collapsed::after {
            content: '...';
            position: absolute;
            bottom: 0;
            right: 0;
            background: linear-gradient(to right, transparent, #1e1e1e);
            padding-left: 20px;
        }

        .ws-expand-btn {
            font-size: 10px;
            color: var(--accent-primary);
            cursor: pointer;
            margin-top: var(--space-xs);
        }

        .ws-expand-btn:hover {
            text-decoration: underline;
        }

        /* Empty State */
        .ws-empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            min-height: 300px;
            color: #6a737d;
            text-align: center;
        }

        .ws-empty-state-icon {
            font-size: 48px;
            margin-bottom: var(--space-lg);
            opacity: 0.5;
        }

        .ws-empty-state-title {
            font-size: var(--text-lg);
            font-weight: 600;
            color: #d4d4d4;
            margin-bottom: var(--space-sm);
        }

        .ws-empty-state-text {
            font-size: var(--text-sm);
            max-width: 300px;
        }

        /* Pause overlay */
        .ws-feed-messages.paused::before {
            content: 'PAUSED';
            position: sticky;
            top: 0;
            display: block;
            background-color: var(--warning);
            color: white;
            text-align: center;
            padding: var(--space-xs) var(--space-sm);
            font-size: var(--text-xs);
            font-weight: 600;
            letter-spacing: 1px;
        }

        /* Button states for pause/resume */
        .btn.paused {
            background-color: var(--warning);
            border-color: var(--warning);
            color: white;
        }

        /* WebSocket Main Container */
        .ws-main-container {
            display: none;
            flex-direction: column;
            gap: var(--space-lg);
        }

        .ws-main-container.active {
            display: flex;
        }

        /* Connection info panel */
        .ws-connection-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: var(--space-md);
        }

        .ws-connection-left {
            display: flex;
            align-items: center;
            gap: var(--space-lg);
        }

        .ws-connection-url {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            font-family: var(--font-mono);
        }

        /* Responsive adjustments for WebSocket panel */
        @media (max-width: 768px) {
            .ws-subscription-list {
                flex-direction: column;
            }

            .ws-subscription-item {
                width: 100%;
            }

            .ws-form-row {
                flex-direction: column;
            }

            .ws-form-group {
                width: 100%;
            }

            .ws-connection-info {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <!-- Top Navigation Bar -->
    <header class="top-bar">
        <div class="logo-section">
            <span class="logo">HYPERLIQUID</span>
            <span class="logo-tag">SDK Demo</span>
        </div>
        <div class="status-section">
            <div class="status-item">
                <span class="status-dot connected" id="connection-status"></span>
                <span>API Connected</span>
            </div>
            <span class="network-badge" id="network-badge">Mainnet</span>
        </div>
    </header>

    <!-- Main Application Container -->
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <!-- Perpetuals Metadata -->
            <div class="nav-section">
                <div class="nav-header">
                    Perpetuals
                    <span class="nav-header-count">4</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item active" data-endpoint="perp-dexs">Perp DEXs</li>
                    <li class="nav-item" data-endpoint="meta">Meta</li>
                    <li class="nav-item" data-endpoint="meta-and-asset-ctxs">Meta + Asset Ctxs</li>
                    <li class="nav-item" data-endpoint="all-perp-metas">All Perp Metas</li>
                </ul>
            </div>

            <!-- Spot Metadata -->
            <div class="nav-section">
                <div class="nav-header">
                    Spot
                    <span class="nav-header-count">5</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="spot-meta">Spot Meta</li>
                    <li class="nav-item" data-endpoint="spot-meta-and-asset-ctxs">Spot Meta + Ctxs</li>
                    <li class="nav-item" data-endpoint="token-details">Token Details</li>
                    <li class="nav-item" data-endpoint="spot-deploy-state">Spot Deploy State</li>
                    <li class="nav-item" data-endpoint="spot-pair-deploy-auction">Pair Auction Status</li>
                </ul>
            </div>

            <!-- Market Data -->
            <div class="nav-section">
                <div class="nav-header">
                    Market Data
                    <span class="nav-header-count">3</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="all-mids">All Mids</li>
                    <li class="nav-item" data-endpoint="l2-book">L2 Book</li>
                    <li class="nav-item" data-endpoint="candle">Candles</li>
                </ul>
            </div>

            <!-- User State -->
            <div class="nav-section">
                <div class="nav-header">
                    User State
                    <span class="nav-header-count">6</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="clearinghouse-state">Clearinghouse</li>
                    <li class="nav-item" data-endpoint="spot-clearinghouse-state">Spot Clearinghouse</li>
                    <li class="nav-item" data-endpoint="open-orders">Open Orders</li>
                    <li class="nav-item" data-endpoint="frontend-open-orders">Frontend Orders</li>
                    <li class="nav-item" data-endpoint="historical-orders">Historical Orders</li>
                    <li class="nav-item" data-endpoint="order-status">Order Status</li>
                </ul>
            </div>

            <!-- User Fills -->
            <div class="nav-section">
                <div class="nav-header">
                    Fills
                    <span class="nav-header-count">3</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="user-fills">User Fills</li>
                    <li class="nav-item" data-endpoint="user-fills-by-time">Fills by Time</li>
                    <li class="nav-item" data-endpoint="user-twap-slice-fills">TWAP Slice Fills</li>
                </ul>
            </div>

            <!-- Funding -->
            <div class="nav-section">
                <div class="nav-header">
                    Funding
                    <span class="nav-header-count">3</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="user-funding">User Funding</li>
                    <li class="nav-item" data-endpoint="funding-history">Funding History</li>
                    <li class="nav-item" data-endpoint="predicted-fundings">Predicted Fundings</li>
                </ul>
            </div>

            <!-- Account Info -->
            <div class="nav-section">
                <div class="nav-header">
                    Account
                    <span class="nav-header-count">6</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="user-non-funding-ledger">Ledger Updates</li>
                    <li class="nav-item" data-endpoint="rate-limits">Rate Limits</li>
                    <li class="nav-item" data-endpoint="portfolio">Portfolio</li>
                    <li class="nav-item" data-endpoint="user-fees">User Fees</li>
                    <li class="nav-item" data-endpoint="user-role">User Role</li>
                    <li class="nav-item" data-endpoint="subaccounts">Subaccounts</li>
                </ul>
            </div>

            <!-- Staking -->
            <div class="nav-section">
                <div class="nav-header">
                    Staking
                    <span class="nav-header-count">4</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="staking-delegations">Delegations</li>
                    <li class="nav-item" data-endpoint="staking-summary">Summary</li>
                    <li class="nav-item" data-endpoint="staking-history">History</li>
                    <li class="nav-item" data-endpoint="staking-rewards">Rewards</li>
                </ul>
            </div>

            <!-- Vault & Misc -->
            <div class="nav-section">
                <div class="nav-header">
                    Vaults & Misc
                    <span class="nav-header-count">10</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="vault-details">Vault Details</li>
                    <li class="nav-item" data-endpoint="user-vaults">User Vaults</li>
                    <li class="nav-item" data-endpoint="builder-fee-approval">Builder Fee Approval</li>
                    <li class="nav-item" data-endpoint="referral">Referral</li>
                    <li class="nav-item" data-endpoint="hip3-state">HIP-3 State</li>
                    <li class="nav-item" data-endpoint="active-asset-data">Active Asset Data</li>
                    <li class="nav-item" data-endpoint="perps-at-oi-cap">Perps at OI Cap</li>
                    <li class="nav-item" data-endpoint="perp-dex-limits">DEX Limits</li>
                    <li class="nav-item" data-endpoint="perp-dex-status">DEX Status</li>
                    <li class="nav-item" data-endpoint="perp-deploy-auction">Deploy Auction</li>
                </ul>
            </div>

            <!-- Borrow/Lend -->
            <div class="nav-section">
                <div class="nav-header">
                    Borrow/Lend
                    <span class="nav-header-count">4</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="borrow-lend-user-state">User State</li>
                    <li class="nav-item" data-endpoint="borrow-lend-reserve-state">Reserve State</li>
                    <li class="nav-item" data-endpoint="all-borrow-lend-reserves">All Reserves</li>
                    <li class="nav-item" data-endpoint="aligned-quote-token">Aligned Quote Token</li>
                </ul>
            </div>

            <!-- Exchange: Order Management -->
            <div class="nav-section">
                <div class="nav-header">
                    Orders
                    <span class="nav-header-count">7</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="place-order">Place Order<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="place-batch-orders">Batch Orders<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="cancel-order">Cancel Order<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="cancel-batch-orders">Batch Cancel<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="cancel-order-by-cloid">Cancel by CLOID<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="modify-order">Modify Order<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="modify-batch-orders">Batch Modify<span class="nav-item-tag">POST</span></li>
                </ul>
            </div>

            <!-- Exchange: TWAP Orders -->
            <div class="nav-section">
                <div class="nav-header">
                    TWAP
                    <span class="nav-header-count">2</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="place-twap-order">Place TWAP<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="cancel-twap-order">Cancel TWAP<span class="nav-item-tag">POST</span></li>
                </ul>
            </div>

            <!-- Exchange: Leverage & Margin -->
            <div class="nav-section">
                <div class="nav-header">
                    Leverage
                    <span class="nav-header-count">3</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="update-leverage">Update Leverage<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="update-isolated-margin">Isolated Margin<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="schedule-cancel">Schedule Cancel<span class="nav-item-tag">POST</span></li>
                </ul>
            </div>

            <!-- Exchange: Transfers -->
            <div class="nav-section">
                <div class="nav-header">
                    Transfers
                    <span class="nav-header-count">4</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="usd-transfer">USD Transfer<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="spot-transfer">Spot Transfer<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="withdraw">Withdraw<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="spot-perp-transfer">Spot/Perp Transfer<span class="nav-item-tag">POST</span></li>
                </ul>
            </div>

            <!-- Exchange: Staking Actions -->
            <div class="nav-section">
                <div class="nav-header">
                    Staking Actions
                    <span class="nav-header-count">4</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="stake-deposit">Stake Deposit<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="stake-withdraw">Stake Withdraw<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="delegate">Delegate<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="undelegate">Undelegate<span class="nav-item-tag">POST</span></li>
                </ul>
            </div>

            <!-- Exchange: Vault Operations -->
            <div class="nav-section">
                <div class="nav-header">
                    Vault Actions
                    <span class="nav-header-count">2</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="vault-deposit">Vault Deposit<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="vault-withdraw">Vault Withdraw<span class="nav-item-tag">POST</span></li>
                </ul>
            </div>

            <!-- Exchange: Approvals & Misc -->
            <div class="nav-section">
                <div class="nav-header">
                    Approvals & Misc
                    <span class="nav-header-count">5</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="approve-agent">Approve Agent<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="approve-builder-fee">Approve Builder<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="reserve-request-weight">Reserve Weight<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="noop">No-Op<span class="nav-item-tag">POST</span></li>
                    <li class="nav-item" data-endpoint="set-hip3-enabled">HIP-3 Toggle<span class="nav-item-tag">POST</span></li>
                </ul>
            </div>

            <!-- WebSocket -->
            <div class="nav-section">
                <div class="nav-header">
                    WebSocket
                    <span class="nav-header-count">19</span>
                </div>
                <ul class="nav-list">
                    <li class="nav-item" data-endpoint="ws-demo">Live Demo<span class="nav-item-tag">WS</span></li>
                </ul>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Content Header -->
            <div class="content-header">
                <div class="content-title-section">
                    <h1 class="content-title">
                        <span id="endpoint-title">Perp DEXs</span>
                        <span class="endpoint-method" id="endpoint-method">GET</span>
                    </h1>
                    <p class="content-description" id="endpoint-description">
                        Retrieve all perpetual DEXs available on Hyperliquid. Returns DEX names, their indices, and configuration details.
                    </p>
                    <p class="content-path" id="endpoint-path">/api/info/perp-dexs</p>
                </div>
                <div class="content-actions">
                    <div class="shortcut-hint">
                        <kbd>Ctrl</kbd><span>+</span><kbd>Enter</kbd>
                    </div>
                    <button class="btn btn-secondary" id="copy-btn" title="Copy response">
                        Copy
                    </button>
                    <button class="btn btn-primary" id="call-btn">
                        Call Endpoint
                    </button>
                </div>
            </div>

            <!-- Content Body -->
            <div class="content-body">
                <!-- Warning Banner for Exchange Endpoints -->
                <div class="warning-banner hidden" id="exchange-warning">
                    <span class="warning-banner-icon">&#9888;</span>
                    <div class="warning-banner-content">
                        <div class="warning-banner-title">Security Warning - Demo Only</div>
                        <div class="warning-banner-text">
                            This endpoint requires a private key for authentication. <strong>Never use a mainnet private key with real funds in this demo environment.</strong>
                            Use a testnet wallet or a dedicated demo account. Private keys are sent to the local server and never stored.
                        </div>
                    </div>
                </div>

                <!-- Parameters Panel (hidden by default, shown for endpoints that need params) -->
                <div class="panel hidden" id="params-panel">
                    <div class="panel-header">
                        <span class="panel-title">
                            Parameters
                            <span class="panel-title-tag" id="params-tag">Required</span>
                        </span>
                    </div>
                    <div class="panel-body">
                        <div id="params-form">
                            <!-- Dynamic parameter inputs will be inserted here -->
                        </div>
                    </div>
                </div>

                <!-- Response Panel -->
                <div class="panel response-container" id="rest-response-panel">
                    <div class="panel-header">
                        <span class="panel-title">
                            Response
                            <span class="panel-title-tag" id="response-time"></span>
                        </span>
                        <div class="panel-actions">
                            <button class="btn btn-secondary btn-icon" id="format-btn" title="Format JSON">
                                { }
                            </button>
                        </div>
                    </div>
                    <div class="panel-body" style="flex: 1; display: flex; flex-direction: column;">
                        <div class="response-area" id="response-area">
                            <pre id="response-content">Click "Call Endpoint" to see the response.</pre>
                        </div>
                    </div>
                </div>

                <!-- WebSocket Demo Container -->
                <div class="ws-main-container" id="ws-container">
                    <!-- Connection Panel -->
                    <div class="panel">
                        <div class="panel-header">
                            <span class="panel-title">Connection</span>
                            <div class="ws-status" id="ws-status">
                                <span class="ws-status-dot disconnected" id="ws-status-dot"></span>
                                <span id="ws-status-text">Disconnected</span>
                            </div>
                        </div>
                        <div class="panel-body">
                            <div class="ws-connection-info">
                                <div class="ws-connection-left">
                                    <span class="ws-connection-url">wss://api.hyperliquid.xyz/ws</span>
                                </div>
                                <div class="content-actions">
                                    <button class="btn btn-primary" id="ws-connect-btn">Connect</button>
                                    <button class="btn btn-secondary" id="ws-disconnect-btn" disabled>Disconnect</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Subscriptions Panel -->
                    <div class="panel">
                        <div class="panel-header">
                            <span class="panel-title">
                                Subscriptions
                                <span class="panel-title-tag" id="ws-active-subs">0 active</span>
                            </span>
                        </div>
                        <div class="panel-body">
                            <div class="ws-subscription-categories">
                                <!-- Market Data Subscriptions -->
                                <div class="ws-category">
                                    <div class="ws-category-header">
                                        Market Data
                                        <span class="ws-category-count">6</span>
                                    </div>
                                    <div class="ws-subscription-list">
                                        <div class="ws-subscription-item" data-sub="allMids">
                                            <span class="sub-indicator"></span>
                                            <span>All Mids</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="l2Book" data-needs="coin">
                                            <span class="sub-indicator"></span>
                                            <span>L2 Book</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="trades" data-needs="coin">
                                            <span class="sub-indicator"></span>
                                            <span>Trades</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="candle" data-needs="coin,interval">
                                            <span class="sub-indicator"></span>
                                            <span>Candles</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="bbo" data-needs="coin">
                                            <span class="sub-indicator"></span>
                                            <span>BBO</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="activeAssetCtx" data-needs="coin">
                                            <span class="sub-indicator"></span>
                                            <span>Asset Context</span>
                                        </div>
                                    </div>
                                    <div class="ws-subscription-form" id="market-data-form">
                                        <div class="ws-form-row">
                                            <div class="ws-form-group">
                                                <label>Coin</label>
                                                <input type="text" id="ws-coin" placeholder="BTC" value="BTC">
                                            </div>
                                            <div class="ws-form-group">
                                                <label>Interval</label>
                                                <select id="ws-interval">
                                                    <option value="1m">1m</option>
                                                    <option value="5m">5m</option>
                                                    <option value="15m">15m</option>
                                                    <option value="1h">1h</option>
                                                    <option value="4h">4h</option>
                                                    <option value="1d">1d</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- User Data Subscriptions -->
                                <div class="ws-category">
                                    <div class="ws-category-header">
                                        User Data
                                        <span class="ws-category-count">5</span>
                                    </div>
                                    <div class="ws-subscription-list">
                                        <div class="ws-subscription-item" data-sub="notification" data-needs="user">
                                            <span class="sub-indicator"></span>
                                            <span>Notifications</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="webData3" data-needs="user">
                                            <span class="sub-indicator"></span>
                                            <span>Web Data</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="twapStates" data-needs="user">
                                            <span class="sub-indicator"></span>
                                            <span>TWAP States</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="clearinghouseState" data-needs="user">
                                            <span class="sub-indicator"></span>
                                            <span>Clearinghouse</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="openOrders" data-needs="user">
                                            <span class="sub-indicator"></span>
                                            <span>Open Orders</span>
                                        </div>
                                    </div>
                                    <div class="ws-subscription-form" id="user-data-form">
                                        <div class="ws-form-row">
                                            <div class="ws-form-group">
                                                <label>User Address</label>
                                                <input type="text" id="ws-user" placeholder="0x..." value="">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- User Events Subscriptions -->
                                <div class="ws-category">
                                    <div class="ws-category-header">
                                        User Events
                                        <span class="ws-category-count">8</span>
                                    </div>
                                    <div class="ws-subscription-list">
                                        <div class="ws-subscription-item" data-sub="orderUpdates" data-needs="user">
                                            <span class="sub-indicator"></span>
                                            <span>Order Updates</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="userEvents" data-needs="user">
                                            <span class="sub-indicator"></span>
                                            <span>User Events</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="userFills" data-needs="user">
                                            <span class="sub-indicator"></span>
                                            <span>Fills</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="userFundings" data-needs="user">
                                            <span class="sub-indicator"></span>
                                            <span>Fundings</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="userNonFundingLedgerUpdates" data-needs="user">
                                            <span class="sub-indicator"></span>
                                            <span>Ledger Updates</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="activeAssetData" data-needs="user,coin">
                                            <span class="sub-indicator"></span>
                                            <span>Active Asset Data</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="userTwapSliceFills" data-needs="user">
                                            <span class="sub-indicator"></span>
                                            <span>TWAP Fills</span>
                                        </div>
                                        <div class="ws-subscription-item" data-sub="userTwapHistory" data-needs="user">
                                            <span class="sub-indicator"></span>
                                            <span>TWAP History</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Live Message Feed -->
                    <div class="panel ws-message-feed">
                        <div class="ws-feed-header">
                            <span class="ws-feed-title">
                                Live Feed
                                <span class="ws-feed-count" id="ws-message-count">0 messages</span>
                            </span>
                            <div class="ws-feed-controls">
                                <button class="btn btn-secondary btn-icon" id="ws-pause-btn" title="Pause feed">
                                    
                                </button>
                                <button class="btn btn-secondary btn-icon" id="ws-clear-btn" title="Clear messages">
                                    
                                </button>
                            </div>
                        </div>
                        <div class="ws-feed-messages" id="ws-messages">
                            <div class="ws-empty-state">
                                <div class="ws-empty-state-icon"></div>
                                <div class="ws-empty-state-title">No messages yet</div>
                                <div class="ws-empty-state-text">
                                    Connect to the WebSocket and subscribe to channels to see live data.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div>Hyperliquid Rust SDK v0.1.0</div>
        <div class="footer-links">
            <a href="https://hyperliquid.xyz" class="footer-link" target="_blank">Hyperliquid</a>
            <a href="https://hyperliquid.gitbook.io/hyperliquid-docs" class="footer-link" target="_blank">API Docs</a>
        </div>
    </footer>

    <script>
        // Endpoint configuration - comprehensive list of all info endpoints
        const endpoints = {
            // === PERPETUALS METADATA ===
            'perp-dexs': {
                title: 'Perp DEXs',
                description: 'Retrieve all perpetual DEXs available on Hyperliquid. Returns DEX names, their indices, and configuration details.',
                url: '/api/info/perp-dexs',
                method: 'GET',
                params: []
            },
            'meta': {
                title: 'Meta',
                description: 'Get perpetual metadata including available assets, their parameters, margin requirements, and trading limits.',
                url: '/api/info/meta',
                method: 'GET',
                params: [
                    { name: 'dex', label: 'DEX', placeholder: 'Optional DEX filter', required: false }
                ]
            },
            'meta-and-asset-ctxs': {
                title: 'Meta and Asset Contexts',
                description: 'Get perpetual metadata along with current asset contexts including mark price, funding rate, and open interest.',
                url: '/api/info/meta-and-asset-ctxs',
                method: 'GET',
                params: [
                    { name: 'dex', label: 'DEX', placeholder: 'Optional DEX filter', required: false }
                ]
            },
            'all-perp-metas': {
                title: 'All Perp Metas',
                description: 'Get metadata for all perpetual assets across all DEXs.',
                url: '/api/info/all-perp-metas',
                method: 'GET',
                params: []
            },

            // === SPOT METADATA ===
            'spot-meta': {
                title: 'Spot Meta',
                description: 'Get spot market metadata including token information and trading pairs.',
                url: '/api/info/spot-meta',
                method: 'GET',
                params: []
            },
            'spot-meta-and-asset-ctxs': {
                title: 'Spot Meta and Asset Contexts',
                description: 'Get spot metadata with current market contexts for all spot assets.',
                url: '/api/info/spot-meta-and-asset-ctxs',
                method: 'GET',
                params: []
            },
            'token-details': {
                title: 'Token Details',
                description: 'Get detailed information about a specific spot token.',
                url: '/api/info/token-details',
                method: 'GET',
                params: [
                    { name: 'token_id', label: 'Token ID', placeholder: 'e.g., 1', required: true, help: 'The token index or identifier' }
                ]
            },
            'spot-deploy-state': {
                title: 'Spot Deploy State',
                description: 'Get the current spot token deployment auction state for a user.',
                url: '/api/info/spot-deploy-state',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },
            'spot-pair-deploy-auction': {
                title: 'Spot Pair Deploy Auction',
                description: 'Get the current status of the spot pair deployment auction.',
                url: '/api/info/spot-pair-deploy-auction-status',
                method: 'GET',
                params: []
            },

            // === MARKET DATA ===
            'all-mids': {
                title: 'All Mids',
                description: 'Get all mid prices for perpetual assets. Returns a mapping of asset names to their current mid prices.',
                url: '/api/info/all-mids',
                method: 'GET',
                params: [
                    { name: 'dex', label: 'DEX', placeholder: 'Optional DEX filter', required: false }
                ]
            },
            'l2-book': {
                title: 'L2 Book',
                description: 'Get the Level 2 order book snapshot for a specific asset. Returns bids and asks with price and size.',
                url: '/api/info/l2-book',
                method: 'GET',
                params: [
                    { name: 'coin', label: 'Coin', placeholder: 'BTC', required: true, help: 'Asset symbol (e.g., BTC, ETH)' },
                    { name: 'n_sig_figs', label: 'Sig Figs', placeholder: '2-5', required: false, help: 'Number of significant figures for price aggregation' },
                    { name: 'mantissa', label: 'Mantissa', placeholder: 'Optional', required: false, help: 'Mantissa for price aggregation' }
                ]
            },
            'candle': {
                title: 'Candles',
                description: 'Get OHLCV candlestick data for a specific asset and time interval.',
                url: '/api/info/candle',
                method: 'GET',
                params: [
                    { name: 'coin', label: 'Coin', placeholder: 'BTC', required: true },
                    { name: 'interval', label: 'Interval', placeholder: '1m, 5m, 15m, 1h, 4h, 1d', required: true, type: 'select', options: ['1m', '5m', '15m', '1h', '4h', '1d'] },
                    { name: 'start_time', label: 'Start Time', placeholder: 'Unix timestamp (ms)', required: true, help: 'Start time in milliseconds' },
                    { name: 'end_time', label: 'End Time', placeholder: 'Unix timestamp (ms)', required: false, help: 'Optional end time in milliseconds' }
                ]
            },

            // === USER STATE ===
            'clearinghouse-state': {
                title: 'Clearinghouse State',
                description: 'Get the perpetual clearinghouse state for a user including positions, margin summary, and account value.',
                url: '/api/info/clearinghouse-state',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true },
                    { name: 'dex', label: 'DEX', placeholder: 'Optional', required: false }
                ]
            },
            'spot-clearinghouse-state': {
                title: 'Spot Clearinghouse State',
                description: 'Get the spot clearinghouse state for a user including token balances.',
                url: '/api/info/spot-clearinghouse-state',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },
            'open-orders': {
                title: 'Open Orders',
                description: 'Get all open orders for a user. Returns order details including price, size, and status.',
                url: '/api/info/open-orders',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true },
                    { name: 'dex', label: 'DEX', placeholder: 'Optional', required: false }
                ]
            },
            'frontend-open-orders': {
                title: 'Frontend Open Orders',
                description: 'Get open orders with additional frontend-specific information.',
                url: '/api/info/frontend-open-orders',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true },
                    { name: 'dex', label: 'DEX', placeholder: 'Optional', required: false }
                ]
            },
            'historical-orders': {
                title: 'Historical Orders',
                description: 'Get historical orders for a user including filled and cancelled orders.',
                url: '/api/info/historical-orders',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },
            'order-status': {
                title: 'Order Status',
                description: 'Get the status of a specific order by order ID or client order ID.',
                url: '/api/info/order-status',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true },
                    { name: 'oid', label: 'Order ID', placeholder: 'Numeric OID', required: false },
                    { name: 'cloid', label: 'Client Order ID', placeholder: 'Client-provided ID', required: false, help: 'Provide either OID or Client Order ID' }
                ]
            },

            // === USER FILLS ===
            'user-fills': {
                title: 'User Fills',
                description: 'Get recent fills for a user. Returns trade history with prices, sizes, and timestamps.',
                url: '/api/info/user-fills',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true },
                    { name: 'dex', label: 'DEX', placeholder: 'Optional', required: false }
                ]
            },
            'user-fills-by-time': {
                title: 'User Fills by Time',
                description: 'Get user fills within a specific time range.',
                url: '/api/info/user-fills-by-time',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true },
                    { name: 'start_time', label: 'Start Time', placeholder: 'Unix timestamp (ms)', required: true },
                    { name: 'end_time', label: 'End Time', placeholder: 'Unix timestamp (ms)', required: false }
                ]
            },
            'user-twap-slice-fills': {
                title: 'TWAP Slice Fills',
                description: 'Get TWAP order slice fills for a user.',
                url: '/api/info/user-twap-slice-fills',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },

            // === FUNDING ===
            'user-funding': {
                title: 'User Funding',
                description: 'Get funding payment history for a user within a time range.',
                url: '/api/info/user-funding',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true },
                    { name: 'start_time', label: 'Start Time', placeholder: 'Unix timestamp (ms)', required: true },
                    { name: 'end_time', label: 'End Time', placeholder: 'Unix timestamp (ms)', required: false }
                ]
            },
            'funding-history': {
                title: 'Funding History',
                description: 'Get historical funding rates for a specific perpetual asset.',
                url: '/api/info/funding-history',
                method: 'GET',
                params: [
                    { name: 'coin', label: 'Coin', placeholder: 'BTC', required: true },
                    { name: 'start_time', label: 'Start Time', placeholder: 'Unix timestamp (ms)', required: true },
                    { name: 'end_time', label: 'End Time', placeholder: 'Unix timestamp (ms)', required: false }
                ]
            },
            'predicted-fundings': {
                title: 'Predicted Fundings',
                description: 'Get predicted next funding rates for all perpetual assets.',
                url: '/api/info/predicted-fundings',
                method: 'GET',
                params: []
            },

            // === ACCOUNT INFO ===
            'user-non-funding-ledger': {
                title: 'Non-Funding Ledger Updates',
                description: 'Get non-funding ledger updates (deposits, withdrawals, transfers, liquidations) for a user.',
                url: '/api/info/user-non-funding-ledger-updates',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true },
                    { name: 'start_time', label: 'Start Time', placeholder: 'Unix timestamp (ms)', required: true },
                    { name: 'end_time', label: 'End Time', placeholder: 'Unix timestamp (ms)', required: false }
                ]
            },
            'rate-limits': {
                title: 'Rate Limits',
                description: 'Get current API rate limit status for a user.',
                url: '/api/info/rate-limits',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },
            'portfolio': {
                title: 'Portfolio',
                description: 'Get portfolio summary for a user including total value and positions.',
                url: '/api/info/portfolio',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },
            'user-fees': {
                title: 'User Fees',
                description: 'Get fee structure and trading volume for a user.',
                url: '/api/info/user-fees',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },
            'user-role': {
                title: 'User Role',
                description: 'Get account role and permissions for a user.',
                url: '/api/info/user-role',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },
            'subaccounts': {
                title: 'Subaccounts',
                description: 'List all subaccounts associated with a master account.',
                url: '/api/info/subaccounts',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },

            // === STAKING ===
            'staking-delegations': {
                title: 'Staking Delegations',
                description: 'Get staking delegations for a user including validators and amounts.',
                url: '/api/info/staking-delegations',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },
            'staking-summary': {
                title: 'Staking Summary',
                description: 'Get overall staking summary for a user including total staked and rewards.',
                url: '/api/info/staking-summary',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },
            'staking-history': {
                title: 'Staking History',
                description: 'Get staking action history (delegate, undelegate, claim) for a user.',
                url: '/api/info/staking-history',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },
            'staking-rewards': {
                title: 'Staking Rewards',
                description: 'Get earned staking rewards organized by validator.',
                url: '/api/info/staking-rewards',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },

            // === VAULTS & MISC ===
            'vault-details': {
                title: 'Vault Details',
                description: 'Get detailed information about a specific vault including TVL, performance, and configuration.',
                url: '/api/info/vault-details',
                method: 'GET',
                params: [
                    { name: 'vault_address', label: 'Vault Address', placeholder: '0x...', required: true }
                ]
            },
            'user-vaults': {
                title: 'User Vaults',
                description: 'Get vault deposits and equity shares for a user.',
                url: '/api/info/user-vaults',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },
            'builder-fee-approval': {
                title: 'Builder Fee Approval',
                description: 'Check if a user has approved a builder for fee collection.',
                url: '/api/info/builder-fee-approval',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true },
                    { name: 'builder', label: 'Builder Address', placeholder: '0x...', required: true }
                ]
            },
            'referral': {
                title: 'Referral',
                description: 'Get referral code, referrer, and cumulative referral stats for a user.',
                url: '/api/info/referral',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },
            'hip3-state': {
                title: 'HIP-3 State',
                description: 'Get HIP-3 abstraction state for a user.',
                url: '/api/info/hip3-state',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },
            'active-asset-data': {
                title: 'Active Asset Data',
                description: 'Get user-specific data for a perpetual asset including leverage and available margin.',
                url: '/api/info/active-asset-data',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true },
                    { name: 'coin', label: 'Coin', placeholder: 'BTC', required: true }
                ]
            },
            'perps-at-oi-cap': {
                title: 'Perps at OI Cap',
                description: 'List perpetual assets that are at their open interest cap.',
                url: '/api/info/perps-at-open-interest-cap',
                method: 'GET',
                params: [
                    { name: 'dex', label: 'DEX', placeholder: 'Optional', required: false }
                ]
            },
            'perp-dex-limits': {
                title: 'DEX Limits',
                description: 'Get market limits configuration for a perpetual DEX.',
                url: '/api/info/perp-dex-limits',
                method: 'GET',
                params: [
                    { name: 'dex', label: 'DEX', placeholder: 'DEX name', required: true }
                ]
            },
            'perp-dex-status': {
                title: 'DEX Status',
                description: 'Get status and statistics for a perpetual DEX.',
                url: '/api/info/perp-dex-status',
                method: 'GET',
                params: [
                    { name: 'dex', label: 'DEX', placeholder: 'DEX name', required: true }
                ]
            },
            'perp-deploy-auction': {
                title: 'Deploy Auction Status',
                description: 'Get the current perpetual deployment auction status.',
                url: '/api/info/perp-deploy-auction-status',
                method: 'GET',
                params: []
            },

            // === BORROW/LEND ===
            'borrow-lend-user-state': {
                title: 'Borrow/Lend User State',
                description: 'Get borrow/lend positions and health factor for a user.',
                url: '/api/info/borrow-lend-user-state',
                method: 'GET',
                params: [
                    { name: 'user', label: 'User Address', placeholder: '0x...', required: true }
                ]
            },
            'borrow-lend-reserve-state': {
                title: 'Reserve State',
                description: 'Get borrow/lend reserve state for a specific asset.',
                url: '/api/info/borrow-lend-reserve-state',
                method: 'GET',
                params: [
                    { name: 'coin', label: 'Coin', placeholder: 'USDC', required: true }
                ]
            },
            'all-borrow-lend-reserves': {
                title: 'All Reserve States',
                description: 'Get borrow/lend reserve states for all assets.',
                url: '/api/info/all-borrow-lend-reserve-states',
                method: 'GET',
                params: []
            },
            'aligned-quote-token': {
                title: 'Aligned Quote Token',
                description: 'Check if a coin is an aligned quote token.',
                url: '/api/info/aligned-quote-token',
                method: 'GET',
                params: [
                    { name: 'coin', label: 'Coin', placeholder: 'USDC', required: true }
                ]
            },

            // === EXCHANGE: ORDER MANAGEMENT ===
            'place-order': {
                title: 'Place Order',
                description: 'Place a single order (limit or trigger). Requires wallet authentication. WARNING: Never use a mainnet private key with real funds in a demo!',
                url: '/api/exchange/place-order',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password', help: 'Hex private key (with or without 0x prefix)' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'], help: 'true = mainnet, false = testnet' },
                    { name: 'asset', label: 'Asset Index', placeholder: '0', required: true, help: 'Asset index (e.g., 0 for BTC)' },
                    { name: 'is_buy', label: 'Side', placeholder: 'true', required: true, type: 'select', options: ['true', 'false'], help: 'true = buy, false = sell' },
                    { name: 'price', label: 'Price', placeholder: '50000.0', required: true, help: 'Limit price as string' },
                    { name: 'size', label: 'Size', placeholder: '0.01', required: true, help: 'Order size as string' },
                    { name: 'reduce_only', label: 'Reduce Only', placeholder: 'false', required: false, type: 'select', options: ['false', 'true'] },
                    { name: 'time_in_force', label: 'Time in Force', placeholder: 'Gtc', required: false, type: 'select', options: ['Gtc', 'Ioc', 'Alo'], help: 'GTC, IOC, or ALO' },
                    { name: 'client_order_id', label: 'Client Order ID', placeholder: 'my-order-1', required: false, help: 'Optional client-provided ID' },
                    { name: 'trigger_price', label: 'Trigger Price', placeholder: '', required: false, help: 'For stop/take-profit orders' },
                    { name: 'trigger_type', label: 'Trigger Type', placeholder: '', required: false, type: 'select', options: ['', 'sl', 'tp'], help: 'sl = stop loss, tp = take profit' }
                ],
                isExchange: true
            },
            'place-batch-orders': {
                title: 'Place Batch Orders',
                description: 'Place multiple orders in a single request. Requires wallet authentication. Send orders as JSON array.',
                url: '/api/exchange/place-batch-orders',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'orders', label: 'Orders (JSON)', placeholder: '[{"asset":0,"is_buy":true,"price":"50000","size":"0.01"}]', required: true, help: 'JSON array of order objects' }
                ],
                isExchange: true
            },
            'cancel-order': {
                title: 'Cancel Order',
                description: 'Cancel an existing order by order ID. Requires wallet authentication.',
                url: '/api/exchange/cancel-order',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'asset', label: 'Asset Index', placeholder: '0', required: true, help: 'Asset index' },
                    { name: 'oid', label: 'Order ID', placeholder: '123456789', required: true, help: 'Numeric order ID' }
                ],
                isExchange: true
            },
            'cancel-batch-orders': {
                title: 'Cancel Batch Orders',
                description: 'Cancel multiple orders in a single request. Requires wallet authentication.',
                url: '/api/exchange/cancel-batch-orders',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'cancels', label: 'Cancels (JSON)', placeholder: '[{"asset":0,"oid":123456}]', required: true, help: 'JSON array of {asset, oid} objects' }
                ],
                isExchange: true
            },
            'cancel-order-by-cloid': {
                title: 'Cancel Order by CLOID',
                description: 'Cancel an order using client-provided order ID. Requires wallet authentication.',
                url: '/api/exchange/cancel-order-by-cloid',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'asset', label: 'Asset Index', placeholder: '0', required: true },
                    { name: 'cloid', label: 'Client Order ID', placeholder: 'my-order-1', required: true, help: 'Your client-provided order ID' }
                ],
                isExchange: true
            },
            'modify-order': {
                title: 'Modify Order',
                description: 'Modify an existing order. Changes price, size, or other parameters. Requires wallet authentication.',
                url: '/api/exchange/modify-order',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'oid', label: 'Order ID', placeholder: '123456789', required: true, help: 'Order ID to modify' },
                    { name: 'asset', label: 'Asset Index', placeholder: '0', required: true },
                    { name: 'is_buy', label: 'Side', placeholder: 'true', required: true, type: 'select', options: ['true', 'false'] },
                    { name: 'price', label: 'New Price', placeholder: '51000.0', required: true },
                    { name: 'size', label: 'New Size', placeholder: '0.01', required: true },
                    { name: 'reduce_only', label: 'Reduce Only', placeholder: 'false', required: false, type: 'select', options: ['false', 'true'] },
                    { name: 'time_in_force', label: 'Time in Force', placeholder: 'Gtc', required: false, type: 'select', options: ['Gtc', 'Ioc', 'Alo'] },
                    { name: 'client_order_id', label: 'Client Order ID', placeholder: '', required: false }
                ],
                isExchange: true
            },
            'modify-batch-orders': {
                title: 'Modify Batch Orders',
                description: 'Modify multiple orders in a single request. Requires wallet authentication.',
                url: '/api/exchange/modify-batch-orders',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'modifications', label: 'Modifications (JSON)', placeholder: '[{"oid":123,"asset":0,"is_buy":true,"price":"51000","size":"0.01"}]', required: true, help: 'JSON array of modification objects' }
                ],
                isExchange: true
            },

            // === EXCHANGE: TWAP ORDERS ===
            'place-twap-order': {
                title: 'Place TWAP Order',
                description: 'Place a Time-Weighted Average Price order. Executes over specified duration. Requires wallet authentication.',
                url: '/api/exchange/place-twap-order',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'asset', label: 'Asset Index', placeholder: '0', required: true },
                    { name: 'is_buy', label: 'Side', placeholder: 'true', required: true, type: 'select', options: ['true', 'false'] },
                    { name: 'size', label: 'Total Size', placeholder: '1.0', required: true, help: 'Total size to execute' },
                    { name: 'duration_minutes', label: 'Duration (min)', placeholder: '60', required: true, help: 'Duration in minutes (5-1440)' },
                    { name: 'randomize', label: 'Randomize', placeholder: 'false', required: false, type: 'select', options: ['false', 'true'], help: 'Randomize execution timing' },
                    { name: 'reduce_only', label: 'Reduce Only', placeholder: 'false', required: false, type: 'select', options: ['false', 'true'] }
                ],
                isExchange: true
            },
            'cancel-twap-order': {
                title: 'Cancel TWAP Order',
                description: 'Cancel an active TWAP order. Requires wallet authentication.',
                url: '/api/exchange/cancel-twap-order',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'asset', label: 'Asset Index', placeholder: '0', required: true },
                    { name: 'twap_id', label: 'TWAP ID', placeholder: '123456', required: true, help: 'TWAP order ID to cancel' }
                ],
                isExchange: true
            },

            // === EXCHANGE: LEVERAGE & MARGIN ===
            'update-leverage': {
                title: 'Update Leverage',
                description: 'Update leverage settings for an asset. Choose between cross and isolated margin mode.',
                url: '/api/exchange/update-leverage',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'asset', label: 'Asset Index', placeholder: '0', required: true },
                    { name: 'is_cross', label: 'Cross Margin', placeholder: 'true', required: true, type: 'select', options: ['true', 'false'], help: 'true = cross margin, false = isolated' },
                    { name: 'leverage', label: 'Leverage', placeholder: '10', required: true, help: 'Leverage multiplier (1-100)' }
                ],
                isExchange: true
            },
            'update-isolated-margin': {
                title: 'Update Isolated Margin',
                description: 'Add or remove isolated margin from a position. Requires wallet authentication.',
                url: '/api/exchange/update-isolated-margin',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'asset', label: 'Asset Index', placeholder: '0', required: true },
                    { name: 'is_buy', label: 'Position Side', placeholder: 'true', required: true, type: 'select', options: ['true', 'false'], help: 'true = long, false = short' },
                    { name: 'ntli', label: 'Margin Delta', placeholder: '100', required: true, help: 'Amount to add (positive) or remove (negative)' }
                ],
                isExchange: true
            },
            'schedule-cancel': {
                title: 'Schedule Cancel (Dead Man\'s Switch)',
                description: 'Schedule automatic cancellation of all orders at a future time. Must be at least 5 seconds in the future.',
                url: '/api/exchange/schedule-cancel',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'timestamp_ms', label: 'Cancel Time (ms)', placeholder: '', required: true, help: 'Unix timestamp in milliseconds (must be >= 5s in future)' }
                ],
                isExchange: true
            },

            // === EXCHANGE: TRANSFERS ===
            'usd-transfer': {
                title: 'USD Transfer',
                description: 'Transfer USDC to another address on Hyperliquid. Requires wallet authentication.',
                url: '/api/exchange/usd-transfer',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'destination', label: 'Destination', placeholder: '0x...', required: true, help: 'Recipient address' },
                    { name: 'amount', label: 'Amount', placeholder: '100.0', required: true, help: 'Amount of USDC to transfer' }
                ],
                isExchange: true
            },
            'spot-transfer': {
                title: 'Spot Transfer',
                description: 'Transfer spot tokens to another address on Hyperliquid. Requires wallet authentication.',
                url: '/api/exchange/spot-transfer',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'destination', label: 'Destination', placeholder: '0x...', required: true, help: 'Recipient address' },
                    { name: 'token', label: 'Token', placeholder: 'PURR', required: true, help: 'Token symbol to transfer' },
                    { name: 'amount', label: 'Amount', placeholder: '10.0', required: true, help: 'Amount to transfer' }
                ],
                isExchange: true
            },
            'withdraw': {
                title: 'Withdraw',
                description: 'Withdraw USDC to Arbitrum L1. Requires wallet authentication.',
                url: '/api/exchange/withdraw',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'destination', label: 'Destination', placeholder: '0x...', required: true, help: 'L1 destination address' },
                    { name: 'amount', label: 'Amount', placeholder: '100.0', required: true, help: 'Amount of USDC to withdraw' }
                ],
                isExchange: true
            },
            'spot-perp-transfer': {
                title: 'Spot/Perp Transfer',
                description: 'Transfer funds between spot and perpetuals accounts. Requires wallet authentication.',
                url: '/api/exchange/spot-perp-transfer',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'amount', label: 'Amount', placeholder: '100.0', required: true, help: 'Amount to transfer' },
                    { name: 'to_perp', label: 'Direction', placeholder: 'true', required: true, type: 'select', options: ['true', 'false'], help: 'true = spot to perp, false = perp to spot' }
                ],
                isExchange: true
            },

            // === EXCHANGE: STAKING ACTIONS ===
            'stake-deposit': {
                title: 'Stake Deposit',
                description: 'Deposit HYPE to staking. Amount in wei (1 HYPE = 10^18 wei). Requires wallet authentication.',
                url: '/api/exchange/stake-deposit',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'wei_amount', label: 'Amount (wei)', placeholder: '1000000000000000000', required: true, help: '1 HYPE = 10^18 wei' }
                ],
                isExchange: true
            },
            'stake-withdraw': {
                title: 'Stake Withdraw',
                description: 'Withdraw HYPE from staking. Amount in wei. Requires wallet authentication.',
                url: '/api/exchange/stake-withdraw',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'wei_amount', label: 'Amount (wei)', placeholder: '1000000000000000000', required: true, help: '1 HYPE = 10^18 wei' }
                ],
                isExchange: true
            },
            'delegate': {
                title: 'Delegate',
                description: 'Delegate staked HYPE to a validator. Requires wallet authentication.',
                url: '/api/exchange/delegate',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'validator', label: 'Validator', placeholder: '0x...', required: true, help: 'Validator address to delegate to' },
                    { name: 'amount', label: 'Amount', placeholder: '100.0', required: true, help: 'Amount of HYPE to delegate' }
                ],
                isExchange: true
            },
            'undelegate': {
                title: 'Undelegate',
                description: 'Undelegate staked HYPE from a validator. Requires wallet authentication.',
                url: '/api/exchange/undelegate',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'validator', label: 'Validator', placeholder: '0x...', required: true, help: 'Validator address to undelegate from' },
                    { name: 'amount', label: 'Amount', placeholder: '100.0', required: true, help: 'Amount of HYPE to undelegate' }
                ],
                isExchange: true
            },

            // === EXCHANGE: VAULT OPERATIONS ===
            'vault-deposit': {
                title: 'Vault Deposit',
                description: 'Deposit USDC into a vault. Requires wallet authentication.',
                url: '/api/exchange/vault-deposit',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'vault_address', label: 'Vault Address', placeholder: '0x...', required: true, help: 'Address of the vault' },
                    { name: 'amount', label: 'Amount', placeholder: '100.0', required: true, help: 'Amount of USDC to deposit' }
                ],
                isExchange: true
            },
            'vault-withdraw': {
                title: 'Vault Withdraw',
                description: 'Withdraw USDC from a vault. Requires wallet authentication.',
                url: '/api/exchange/vault-withdraw',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'vault_address', label: 'Vault Address', placeholder: '0x...', required: true, help: 'Address of the vault' },
                    { name: 'amount', label: 'Amount', placeholder: '100.0', required: true, help: 'Amount of USDC to withdraw' }
                ],
                isExchange: true
            },

            // === EXCHANGE: APPROVALS ===
            'approve-agent': {
                title: 'Approve Agent',
                description: 'Approve an API wallet (agent) to trade on your behalf. Requires wallet authentication.',
                url: '/api/exchange/approve-agent',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'agent_address', label: 'Agent Address', placeholder: '0x...', required: true, help: 'Address of the agent wallet to approve' },
                    { name: 'agent_name', label: 'Agent Name', placeholder: 'My Trading Bot', required: false, help: 'Optional human-readable name' }
                ],
                isExchange: true
            },
            'approve-builder-fee': {
                title: 'Approve Builder Fee',
                description: 'Approve a builder to collect fees from your trades. Requires wallet authentication.',
                url: '/api/exchange/approve-builder-fee',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'builder', label: 'Builder Address', placeholder: '0x...', required: true, help: 'Address of the builder to approve' },
                    { name: 'max_fee_rate', label: 'Max Fee Rate', placeholder: '0.001', required: true, help: 'Maximum fee rate (e.g., 0.001 = 0.1%)' }
                ],
                isExchange: true
            },

            // === EXCHANGE: MISCELLANEOUS ===
            'reserve-request-weight': {
                title: 'Reserve Request Weight',
                description: 'Purchase additional rate limit capacity. Requires wallet authentication.',
                url: '/api/exchange/reserve-request-weight',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'weight', label: 'Weight', placeholder: '1000', required: true, help: 'Amount of rate limit weight to reserve' }
                ],
                isExchange: true
            },
            'noop': {
                title: 'No-Op (Heartbeat)',
                description: 'Send a no-op action. Useful as a heartbeat to keep API wallet sessions alive.',
                url: '/api/exchange/noop',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] }
                ],
                isExchange: true
            },
            'set-hip3-enabled': {
                title: 'HIP-3 Toggle',
                description: 'Enable or disable HIP-3 abstraction for your account. Requires wallet authentication.',
                url: '/api/exchange/set-hip3-enabled',
                method: 'POST',
                params: [
                    { name: 'private_key', label: 'Private Key', placeholder: '0x...', required: true, type: 'password' },
                    { name: 'mainnet', label: 'Network', placeholder: 'true', required: false, type: 'select', options: ['true', 'false'] },
                    { name: 'enabled', label: 'Enabled', placeholder: 'true', required: true, type: 'select', options: ['true', 'false'], help: 'true = enable HIP-3, false = disable' }
                ],
                isExchange: true
            },

            // === WEBSOCKET ===
            'ws-demo': {
                title: 'WebSocket Demo',
                description: 'Real-time WebSocket subscriptions for market data and user events. Connect to receive live updates from Hyperliquid.',
                url: 'wss://api.hyperliquid.xyz/ws',
                method: 'WS',
                params: [],
                isWebSocket: true
            }
        };

        let currentEndpoint = 'perp-dexs';

        // DOM Elements
        const paramsPanel = document.getElementById('params-panel');
        const paramsForm = document.getElementById('params-form');
        const paramsTag = document.getElementById('params-tag');
        const responseArea = document.getElementById('response-area');
        const responseContent = document.getElementById('response-content');
        const responseTime = document.getElementById('response-time');
        const endpointTitle = document.getElementById('endpoint-title');
        const endpointDescription = document.getElementById('endpoint-description');
        const endpointPath = document.getElementById('endpoint-path');
        const endpointMethod = document.getElementById('endpoint-method');
        const callBtn = document.getElementById('call-btn');
        const copyBtn = document.getElementById('copy-btn');
        const formatBtn = document.getElementById('format-btn');

        // Initialize navigation
        function initNavigation() {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    const endpoint = item.dataset.endpoint;
                    if (endpoints[endpoint]) {
                        selectEndpoint(endpoint);

                        // Update active state
                        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                        item.classList.add('active');
                    }
                });
            });
        }

        // Select an endpoint
        function selectEndpoint(endpoint) {
            currentEndpoint = endpoint;
            const config = endpoints[endpoint];
            const exchangeWarning = document.getElementById('exchange-warning');
            const wsContainer = document.getElementById('ws-container');
            const restResponsePanel = document.getElementById('rest-response-panel');
            const contentActions = document.querySelector('.content-actions');

            endpointTitle.textContent = config.title;
            endpointDescription.textContent = config.description;
            endpointPath.textContent = config.url || 'WebSocket connection';
            endpointMethod.textContent = config.method;
            endpointMethod.style.backgroundColor = config.method === 'POST' ? 'var(--warning)' :
                                                    config.method === 'WS' ? 'var(--accent-primary)' : 'var(--success)';

            // Handle WebSocket demo differently
            if (config.isWebSocket) {
                wsContainer.classList.add('active');
                restResponsePanel.style.display = 'none';
                paramsPanel.classList.add('hidden');
                exchangeWarning.classList.add('hidden');
                contentActions.style.display = 'none';
                return;
            }

            // Hide WebSocket container, show REST panels
            wsContainer.classList.remove('active');
            restResponsePanel.style.display = '';
            contentActions.style.display = '';

            responseContent.innerHTML = config.isExchange
                ? 'Fill in the parameters above and click "Execute Action" to send the request.'
                : 'Click "Call Endpoint" to see the response.';
            responseArea.className = 'response-area';
            responseTime.textContent = '';

            // Show/hide warning banner for exchange endpoints
            if (config.isExchange) {
                exchangeWarning.classList.remove('hidden');
            } else {
                exchangeWarning.classList.add('hidden');
            }

            // Update params panel
            if (config.params && config.params.length > 0) {
                paramsPanel.classList.remove('hidden');
                const hasRequired = config.params.some(p => p.required);
                paramsTag.textContent = hasRequired ? 'Required' : 'Optional';
                renderParamsForm(config.params);
            } else {
                paramsPanel.classList.add('hidden');
            }

            // Update call button
            if (!config.url) {
                callBtn.disabled = true;
                callBtn.textContent = 'Not Available';
                callBtn.className = 'btn btn-primary';
            } else {
                callBtn.disabled = false;
                if (config.isExchange) {
                    callBtn.textContent = 'Execute Action';
                    callBtn.className = 'btn btn-warning';
                } else {
                    callBtn.textContent = 'Call Endpoint';
                    callBtn.className = 'btn btn-primary';
                }
            }
        }

        // Render parameter form
        function renderParamsForm(params) {
            const rows = [];
            let currentRow = [];

            params.forEach((param, index) => {
                const inputHtml = param.type === 'select'
                    ? `<select class="form-select" name="${param.name}" ${param.required ? 'required' : ''}>
                        <option value="">Select ${param.label}</option>
                        ${param.options.map(opt => `<option value="${opt}">${opt}</option>`).join('')}
                       </select>`
                    : `<input
                        type="${param.type || 'text'}"
                        class="form-input"
                        name="${param.name}"
                        placeholder="${param.placeholder}"
                        ${param.required ? 'required' : ''}
                    >`;

                const html = `
                    <div class="form-group">
                        <label class="form-label">${param.label}${param.required ? ' <span class="required">*</span>' : ''}</label>
                        ${inputHtml}
                        ${param.help ? `<div class="form-help">${param.help}</div>` : ''}
                    </div>
                `;

                currentRow.push(html);

                // Create rows of 2-3 items for compact layout
                if (currentRow.length === 3 || index === params.length - 1) {
                    rows.push(`<div class="form-row">${currentRow.join('')}</div>`);
                    currentRow = [];
                }
            });

            paramsForm.innerHTML = rows.join('');
        }

        // Collect form parameters
        function collectParams() {
            const params = {};
            paramsForm.querySelectorAll('.form-input, .form-select').forEach(input => {
                if (input.value) {
                    params[input.name] = input.value;
                }
            });
            return params;
        }

        // JSON syntax highlighting
        function syntaxHighlight(json) {
            if (typeof json !== 'string') {
                json = JSON.stringify(json, null, 2);
            }
            return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
                let cls = 'json-number';
                if (/^"/.test(match)) {
                    if (/:$/.test(match)) {
                        cls = 'json-key';
                    } else {
                        cls = 'json-string';
                    }
                } else if (/true|false/.test(match)) {
                    cls = 'json-boolean';
                } else if (/null/.test(match)) {
                    cls = 'json-null';
                }
                return '<span class="' + cls + '">' + match + '</span>';
            });
        }

        // Convert string values to proper types based on endpoint config
        function convertParamTypes(params, config) {
            const converted = { ...params };
            const booleanFields = ['mainnet', 'is_buy', 'is_cross', 'reduce_only', 'randomize', 'to_perp', 'enabled'];
            const intFields = ['asset', 'oid', 'twap_id', 'leverage', 'ntli', 'weight', 'duration_minutes', 'timestamp_ms'];

            for (const [key, value] of Object.entries(converted)) {
                if (booleanFields.includes(key)) {
                    converted[key] = value === 'true';
                } else if (intFields.includes(key)) {
                    converted[key] = parseInt(value, 10);
                }
                // Try to parse JSON for array/object fields
                if (key === 'orders' || key === 'cancels' || key === 'modifications') {
                    try {
                        converted[key] = JSON.parse(value);
                    } catch (e) {
                        // Keep as string if invalid JSON
                    }
                }
            }
            return converted;
        }

        // Call endpoint
        async function callEndpoint() {
            const config = endpoints[currentEndpoint];
            if (!config.url) {
                responseContent.innerHTML = 'This endpoint is not yet implemented.';
                return;
            }

            let params = collectParams();

            // Validate required params
            const missingParams = config.params
                .filter(p => p.required && !params[p.name])
                .map(p => p.label);

            if (missingParams.length > 0) {
                responseContent.innerHTML = `<span class="json-string">Missing required parameters: ${missingParams.join(', ')}</span>`;
                responseArea.className = 'response-area error';
                return;
            }

            responseContent.innerHTML = '<div class="spinner"></div> Loading...';
            responseArea.className = 'response-area loading';
            const startTime = performance.now();

            try {
                let url = config.url;
                let options = { method: 'GET' };

                if (config.method === 'POST') {
                    // Convert types for exchange endpoints
                    if (config.isExchange) {
                        params = convertParamTypes(params, config);
                    }
                    options = {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(params)
                    };
                } else if (Object.keys(params).length > 0) {
                    const searchParams = new URLSearchParams(params);
                    url = `${config.url}?${searchParams}`;
                }

                const response = await fetch(url, options);
                const data = await response.json();
                const duration = Math.round(performance.now() - startTime);

                // Update response time with status indicator
                if (data.success) {
                    responseTime.innerHTML = `${duration}ms <span class="response-status success">Success</span>`;
                } else {
                    responseTime.innerHTML = `${duration}ms <span class="response-status error">Error</span>`;
                }
                responseContent.innerHTML = syntaxHighlight(JSON.stringify(data, null, 2));
                responseArea.className = data.success ? 'response-area' : 'response-area error';
            } catch (error) {
                const duration = Math.round(performance.now() - startTime);
                responseTime.innerHTML = `${duration}ms <span class="response-status error">Failed</span>`;
                responseContent.innerHTML = `<span class="json-string">Error: ${error.message}</span>`;
                responseArea.className = 'response-area error';
            }
        }

        // Copy response
        function copyResponse() {
            const text = responseContent.textContent;
            navigator.clipboard.writeText(text).then(() => {
                const originalText = copyBtn.textContent;
                copyBtn.textContent = 'Copied!';
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                }, 1500);
            });
        }

        // Format JSON
        function formatJson() {
            try {
                const text = responseContent.textContent;
                const json = JSON.parse(text);
                responseContent.innerHTML = syntaxHighlight(JSON.stringify(json, null, 2));
            } catch (e) {
                // Not valid JSON, ignore
            }
        }

        // Event listeners
        callBtn.addEventListener('click', callEndpoint);
        copyBtn.addEventListener('click', copyResponse);
        formatBtn.addEventListener('click', formatJson);

        // Keyboard shortcut: Ctrl+Enter to call endpoint
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && e.ctrlKey) {
                e.preventDefault();
                callEndpoint();
            }
        });

        // ============================================
        // WebSocket Demo Implementation
        // ============================================

        let ws = null;
        let wsMessageCount = 0;
        let wsPaused = false;
        let wsActiveSubscriptions = new Set();
        let wsMessageQueue = []; // Queue messages when paused

        // WebSocket DOM Elements
        const wsConnectBtn = document.getElementById('ws-connect-btn');
        const wsDisconnectBtn = document.getElementById('ws-disconnect-btn');
        const wsStatusDot = document.getElementById('ws-status-dot');
        const wsStatusText = document.getElementById('ws-status-text');
        const wsMessages = document.getElementById('ws-messages');
        const wsMessageCountEl = document.getElementById('ws-message-count');
        const wsActiveSubsEl = document.getElementById('ws-active-subs');
        const wsPauseBtn = document.getElementById('ws-pause-btn');
        const wsClearBtn = document.getElementById('ws-clear-btn');
        const wsCoinInput = document.getElementById('ws-coin');
        const wsIntervalSelect = document.getElementById('ws-interval');
        const wsUserInput = document.getElementById('ws-user');

        // Update WebSocket connection status UI
        function updateWsStatus(status, message) {
            wsStatusDot.className = 'ws-status-dot ' + status;
            wsStatusText.textContent = message;

            if (status === 'connected') {
                wsConnectBtn.disabled = true;
                wsDisconnectBtn.disabled = false;
            } else if (status === 'disconnected' || status === 'error') {
                wsConnectBtn.disabled = false;
                wsDisconnectBtn.disabled = true;
                // Clear active subscriptions on disconnect
                wsActiveSubscriptions.clear();
                updateSubscriptionUI();
            } else if (status === 'connecting') {
                wsConnectBtn.disabled = true;
                wsDisconnectBtn.disabled = true;
            }
        }

        // Add message to the feed
        function addWsMessage(type, content, channel = null) {
            if (wsPaused && type === 'data') {
                wsMessageQueue.push({ type, content, channel, time: new Date() });
                return;
            }

            wsMessageCount++;
            wsMessageCountEl.textContent = `${wsMessageCount} message${wsMessageCount !== 1 ? 's' : ''}`;

            // Remove empty state if present
            const emptyState = wsMessages.querySelector('.ws-empty-state');
            if (emptyState) {
                emptyState.remove();
            }

            const messageEl = document.createElement('div');
            messageEl.className = `ws-message ${type}`;

            const time = new Date().toLocaleTimeString('en-US', {
                hour12: false,
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                fractionalSecondDigits: 3
            });

            // Format content
            let formattedContent = content;
            if (typeof content === 'object') {
                try {
                    formattedContent = JSON.stringify(content, null, 2);
                } catch (e) {
                    formattedContent = String(content);
                }
            }

            // Determine if content should be collapsed (more than 3 lines)
            const lineCount = formattedContent.split('\n').length;
            const shouldCollapse = lineCount > 4;

            const typeLabels = {
                'data': channel || 'Data',
                'subscribe': 'Subscribed',
                'unsubscribe': 'Unsubscribed',
                'error': 'Error',
                'system': 'System'
            };

            messageEl.innerHTML = `
                <div class="ws-message-header">
                    <span class="ws-message-type">${typeLabels[type] || type}</span>
                    <span class="ws-message-time">${time}</span>
                </div>
                <div class="ws-message-content${shouldCollapse ? ' collapsed' : ''}">${syntaxHighlight(formattedContent)}</div>
                ${shouldCollapse ? '<span class="ws-expand-btn">Show more</span>' : ''}
            `;

            // Add expand/collapse functionality
            if (shouldCollapse) {
                const expandBtn = messageEl.querySelector('.ws-expand-btn');
                const contentEl = messageEl.querySelector('.ws-message-content');
                expandBtn.addEventListener('click', () => {
                    contentEl.classList.toggle('collapsed');
                    expandBtn.textContent = contentEl.classList.contains('collapsed') ? 'Show more' : 'Show less';
                });
            }

            // Insert at the top
            wsMessages.insertBefore(messageEl, wsMessages.firstChild);

            // Limit messages to 500
            while (wsMessages.children.length > 500) {
                wsMessages.removeChild(wsMessages.lastChild);
            }
        }

        // Connect to WebSocket
        function connectWs() {
            if (ws && ws.readyState === WebSocket.OPEN) {
                return;
            }

            updateWsStatus('connecting', 'Connecting...');
            addWsMessage('system', 'Connecting to wss://api.hyperliquid.xyz/ws');

            try {
                ws = new WebSocket('wss://api.hyperliquid.xyz/ws');

                ws.onopen = () => {
                    updateWsStatus('connected', 'Connected');
                    addWsMessage('system', 'Connection established');
                };

                ws.onclose = (event) => {
                    updateWsStatus('disconnected', 'Disconnected');
                    addWsMessage('system', `Connection closed (code: ${event.code})`);
                    ws = null;
                };

                ws.onerror = (error) => {
                    updateWsStatus('error', 'Error');
                    addWsMessage('error', 'WebSocket error occurred');
                    console.error('WebSocket error:', error);
                };

                ws.onmessage = (event) => {
                    try {
                        const data = JSON.parse(event.data);
                        const channel = data.channel || (data.data && data.data.channel) || 'message';
                        addWsMessage('data', data, channel);
                    } catch (e) {
                        addWsMessage('data', event.data, 'raw');
                    }
                };
            } catch (error) {
                updateWsStatus('error', 'Failed to connect');
                addWsMessage('error', `Connection failed: ${error.message}`);
            }
        }

        // Disconnect from WebSocket
        function disconnectWs() {
            if (ws) {
                ws.close();
                ws = null;
            }
        }

        // Build subscription payload
        function buildSubscription(subType) {
            const coin = wsCoinInput.value || 'BTC';
            const interval = wsIntervalSelect.value;
            const user = wsUserInput.value;

            switch (subType) {
                case 'allMids':
                    return { type: 'allMids' };
                case 'l2Book':
                    return { type: 'l2Book', coin };
                case 'trades':
                    return { type: 'trades', coin };
                case 'candle':
                    return { type: 'candle', coin, interval };
                case 'bbo':
                    return { type: 'bbo', coin };
                case 'activeAssetCtx':
                    return { type: 'activeAssetCtx', coin };
                case 'notification':
                    return { type: 'notification', user };
                case 'webData3':
                    return { type: 'webData3', user };
                case 'twapStates':
                    return { type: 'twapStates', user };
                case 'clearinghouseState':
                    return { type: 'clearinghouseState', user };
                case 'openOrders':
                    return { type: 'openOrders', user };
                case 'orderUpdates':
                    return { type: 'orderUpdates', user };
                case 'userEvents':
                    return { type: 'userEvents', user };
                case 'userFills':
                    return { type: 'userFills', user };
                case 'userFundings':
                    return { type: 'userFundings', user };
                case 'userNonFundingLedgerUpdates':
                    return { type: 'userNonFundingLedgerUpdates', user };
                case 'activeAssetData':
                    return { type: 'activeAssetData', user, coin };
                case 'userTwapSliceFills':
                    return { type: 'userTwapSliceFills', user };
                case 'userTwapHistory':
                    return { type: 'userTwapHistory', user };
                default:
                    return null;
            }
        }

        // Get subscription key for tracking
        function getSubscriptionKey(subscription) {
            return JSON.stringify(subscription);
        }

        // Toggle subscription
        function toggleSubscription(subType, element) {
            if (!ws || ws.readyState !== WebSocket.OPEN) {
                addWsMessage('error', 'Not connected. Please connect first.');
                return;
            }

            // Check if required fields are filled
            const needs = element.dataset.needs ? element.dataset.needs.split(',') : [];
            if (needs.includes('user') && !wsUserInput.value) {
                addWsMessage('error', 'Please enter a user address first.');
                return;
            }
            if (needs.includes('coin') && !wsCoinInput.value) {
                addWsMessage('error', 'Please enter a coin symbol first.');
                return;
            }

            const subscription = buildSubscription(subType);
            if (!subscription) {
                addWsMessage('error', `Unknown subscription type: ${subType}`);
                return;
            }

            const subKey = getSubscriptionKey(subscription);
            const isActive = wsActiveSubscriptions.has(subKey);

            const message = {
                method: isActive ? 'unsubscribe' : 'subscribe',
                subscription: subscription
            };

            try {
                ws.send(JSON.stringify(message));

                if (isActive) {
                    wsActiveSubscriptions.delete(subKey);
                    addWsMessage('unsubscribe', subscription);
                } else {
                    wsActiveSubscriptions.add(subKey);
                    addWsMessage('subscribe', subscription);
                }

                updateSubscriptionUI();
            } catch (error) {
                addWsMessage('error', `Failed to ${isActive ? 'unsubscribe' : 'subscribe'}: ${error.message}`);
            }
        }

        // Update subscription UI elements
        function updateSubscriptionUI() {
            // Update active count
            wsActiveSubsEl.textContent = `${wsActiveSubscriptions.size} active`;

            // Update subscription item visuals
            document.querySelectorAll('.ws-subscription-item').forEach(item => {
                const subType = item.dataset.sub;
                const subscription = buildSubscription(subType);
                const subKey = getSubscriptionKey(subscription);

                if (wsActiveSubscriptions.has(subKey)) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        }

        // Toggle pause
        function togglePause() {
            wsPaused = !wsPaused;

            if (wsPaused) {
                wsPauseBtn.textContent = '';
                wsPauseBtn.classList.add('paused');
                wsPauseBtn.title = 'Resume feed';
                wsMessages.classList.add('paused');
            } else {
                wsPauseBtn.textContent = '';
                wsPauseBtn.classList.remove('paused');
                wsPauseBtn.title = 'Pause feed';
                wsMessages.classList.remove('paused');

                // Flush queued messages
                wsMessageQueue.forEach(msg => {
                    addWsMessage(msg.type, msg.content, msg.channel);
                });
                wsMessageQueue = [];
            }
        }

        // Clear messages
        function clearMessages() {
            wsMessages.innerHTML = `
                <div class="ws-empty-state">
                    <div class="ws-empty-state-icon"></div>
                    <div class="ws-empty-state-title">No messages yet</div>
                    <div class="ws-empty-state-text">
                        Connect to the WebSocket and subscribe to channels to see live data.
                    </div>
                </div>
            `;
            wsMessageCount = 0;
            wsMessageCountEl.textContent = '0 messages';
            wsMessageQueue = [];
        }

        // Initialize WebSocket event listeners
        function initWebSocket() {
            wsConnectBtn.addEventListener('click', connectWs);
            wsDisconnectBtn.addEventListener('click', disconnectWs);
            wsPauseBtn.addEventListener('click', togglePause);
            wsClearBtn.addEventListener('click', clearMessages);

            // Subscription toggle handlers
            document.querySelectorAll('.ws-subscription-item').forEach(item => {
                item.addEventListener('click', () => {
                    const subType = item.dataset.sub;
                    toggleSubscription(subType, item);
                });
            });

            // Update subscription UI when form inputs change
            [wsCoinInput, wsIntervalSelect, wsUserInput].forEach(input => {
                input.addEventListener('change', updateSubscriptionUI);
                input.addEventListener('input', updateSubscriptionUI);
            });
        }

        // Initialize
        initNavigation();
        initWebSocket();
    </script>
</body>
</html>
